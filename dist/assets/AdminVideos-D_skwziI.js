var S=Object.defineProperty,V=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var k=(i,l,n)=>l in i?S(i,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[l]=n,g=(i,l)=>{for(var n in l||(l={}))E.call(l,n)&&k(i,n,l[n]);if(w)for(var n of w(l))z.call(l,n)&&k(i,n,l[n]);return i},b=(i,l)=>V(i,C(l));var p=(i,l,n)=>new Promise((t,s)=>{var c=o=>{try{u(n.next(o))}catch(x){s(x)}},h=o=>{try{u(n.throw(o))}catch(x){s(x)}},u=o=>o.done?t(o.value):Promise.resolve(o.value).then(c,h);u((n=n.apply(i,l)).next())});import{r as d,j as e,P as v,k as I,l as U,E as A}from"./vendor-DFO5Jmbo.js";import{c as D,v as y}from"./api-vXz7ElHN.js";import{M}from"./Modal-D9XuV0-K.js";import{I as K}from"./ImageUpload-CSofYKUZ.js";function L({isOpen:i,onClose:l,onSubmit:n,video:t}){const[s,c]=d.useState({title:(t==null?void 0:t.title)||"",embedUrl:(t==null?void 0:t.embedUrl)||"",description:(t==null?void 0:t.description)||"",thumbnail:(t==null?void 0:t.thumbnail)||"",duration:(t==null?void 0:t.duration)||"",categoryId:(t==null?void 0:t.categoryId)||"",tags:(t==null?void 0:t.tags)||[],published:(t==null?void 0:t.published)||!1}),[h,u]=d.useState(!1),[o,x]=d.useState(""),[f,j]=d.useState([]);d.useEffect(()=>{p(this,null,function*(){try{const m=yield D.getAll();j(m)}catch(m){console.error("Kategoriler yüklenirken hata:",m)}})},[]);const a=r=>p(this,null,function*(){r.preventDefault(),u(!0),x("");try{yield n(s),l()}catch(m){x("Bir hata oluştu"),console.error(m)}finally{u(!1)}});return e.jsx(M,{isOpen:i,onClose:l,title:t?"Videoyu Düzenle":"Yeni Video",children:e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Başlık"}),e.jsx("input",{type:"text",value:s.title,onChange:r=>c(b(g({},s),{title:r.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Video başlığı",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Embed URL"}),e.jsx("input",{type:"url",value:s.embedUrl,onChange:r=>c(b(g({},s),{embedUrl:r.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://www.youtube.com/embed/...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Açıklama"}),e.jsx("textarea",{value:s.description,onChange:r=>c(b(g({},s),{description:r.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Video açıklaması",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Önizleme Görseli"}),e.jsx(K,{currentImage:s.thumbnail,onUpload:r=>c(b(g({},s),{thumbnail:r}))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Süre"}),e.jsx("input",{type:"text",value:s.duration,onChange:r=>c(b(g({},s),{duration:r.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5:30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Kategori"}),e.jsxs("select",{value:s.categoryId,onChange:r=>c(b(g({},s),{categoryId:r.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Kategori Seçin"}),f.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Etiketler (virgülle ayırın)"}),e.jsx("input",{type:"text",value:s.tags.join(", "),onChange:r=>{const m=r.target.value.split(",").map(N=>N.trim()).filter(N=>N!=="");c(b(g({},s),{tags:m}))},className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"React, Tutorial, JavaScript"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"published",checked:s.published,onChange:r=>c(b(g({},s),{published:r.target.checked})),className:"w-4 h-4 text-blue-500 border-gray-700 rounded focus:ring-blue-500 focus:ring-offset-gray-900"}),e.jsx("label",{htmlFor:"published",className:"ml-2 text-sm font-medium text-gray-300",children:"Yayınla"})]}),o&&e.jsx("div",{className:"text-red-400 bg-red-500/10 p-3 rounded-lg text-sm",children:o}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-400 hover:text-gray-300 transition-colors",disabled:h,children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",disabled:h,children:h?"Kaydediliyor...":t?"Güncelle":"Ekle"})]})]})})}function P(){const[i,l]=d.useState([]),[n,t]=d.useState(!0),[s,c]=d.useState(""),[h,u]=d.useState(!1),[o,x]=d.useState(void 0),f=()=>p(this,null,function*(){try{t(!0);const a=yield y.getAll();l(a),c("")}catch(a){c("Videolar yüklenirken bir hata oluştu"),console.error(a)}finally{t(!1)}});d.useEffect(()=>{f()},[]);const j=a=>p(this,null,function*(){if(window.confirm("Bu videoyu silmek istediğinizden emin misiniz?"))try{yield y.delete(a),yield f()}catch(r){c("Video silinirken bir hata oluştu"),console.error(r)}});return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Videolar"}),e.jsxs("button",{onClick:()=>{x(void 0),u(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(v,{size:20}),"Yeni Video"]})]}),s&&e.jsx("div",{className:"bg-red-500/10 text-red-400 p-4 rounded-lg",children:s}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(a=>{var r;return e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-lg overflow-hidden hover:border-gray-600/50 transition-colors",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/80 text-white text-sm rounded",children:a.duration})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:a.title}),e.jsx("span",{className:`px-2 py-1 text-sm rounded ${a.published?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:a.published?"Yayında":"Taslak"})]}),e.jsx("p",{className:"text-gray-400 line-clamp-3",children:a.description}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(r=a.tags)==null?void 0:r.map(m=>e.jsx("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-300 text-sm rounded",children:m},m))}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{x(a),u(!0)},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Düzenle",children:e.jsx(I,{size:20})}),e.jsx("button",{onClick:()=>j(a.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Sil",children:e.jsx(U,{size:20})})]}),e.jsx("a",{href:a.embedUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Videoyu Görüntüle",children:e.jsx(A,{size:20})})]})]})]},a.id)})}),e.jsx(L,{isOpen:h,onClose:()=>{u(!1),x(void 0)},onSubmit:a=>p(this,null,function*(){o?yield y.update(o.id,a):yield y.create(a),yield f()}),video:o})]})}export{P as AdminVideos};
