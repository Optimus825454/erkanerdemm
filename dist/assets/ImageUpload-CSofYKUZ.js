var x=(c,p,i)=>new Promise((u,s)=>{var l=t=>{try{n(i.next(t))}catch(r){s(r)}},d=t=>{try{n(i.throw(t))}catch(r){s(r)}},n=t=>t.done?u(t.value):Promise.resolve(t.value).then(l,d);n((i=i.apply(c,p)).next())});import{r as b,j as e,U as f,X as v}from"./vendor-DFO5Jmbo.js";import{u as k}from"./api-vXz7ElHN.js";function U({onUpload:c,currentImage:p,className:i=""}){const[u,s]=b.useState(p||null),[l,d]=b.useState(!1),[n,t]=b.useState(null),r=b.useRef(null),y=a=>x(this,null,function*(){var g;const o=(g=a.target.files)==null?void 0:g[0];if(o){if(!o.type.startsWith("image/")){t("Lütfen geçerli bir resim dosyası seçin");return}if(o.size>5*1024*1024){t("Resim boyutu 5MB'dan küçük olmalıdır");return}try{d(!0),t(null);const m=URL.createObjectURL(o);s(m);const h=yield k.uploadImage(o);c(h.url),URL.revokeObjectURL(m),s(h.url)}catch(m){console.error("Resim yüklenirken hata:",m),t("Resim yüklenirken bir hata oluştu"),s(null)}finally{d(!1)}}}),j=()=>{s(null),c(""),r.current&&(r.current.value="")};return e.jsxs("div",{className:`relative ${i}`,children:[e.jsx("input",{type:"file",ref:r,onChange:y,accept:"image/*",className:"hidden"}),u?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:u,alt:"Önizleme",className:"w-full h-48 object-cover rounded-lg"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var a;return(a=r.current)==null?void 0:a.click()},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",disabled:l,children:e.jsx(f,{size:20})}),e.jsx("button",{type:"button",onClick:j,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",disabled:l,children:e.jsx(v,{size:20})})]})]}):e.jsxs("button",{type:"button",onClick:()=>{var a;return(a=r.current)==null?void 0:a.click()},disabled:l,className:"w-full h-48 border-2 border-dashed border-gray-700 rounded-lg flex flex-col items-center justify-center gap-2 hover:border-gray-600 transition-colors",children:[e.jsx(f,{size:24,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:l?"Yükleniyor...":"Resim Yükle"})]}),n&&e.jsx("div",{className:"mt-2 text-red-400 text-sm",children:n}),l&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]})}export{U as I};
