var w=Object.defineProperty,k=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var N=(a,t,r)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,g=(a,t)=>{for(var r in t||(t={}))C.call(t,r)&&N(a,r,t[r]);if(y)for(var r of y(t))K.call(t,r)&&N(a,r,t[r]);return a},f=(a,t)=>k(a,S(t));var p=(a,t,r)=>new Promise((i,n)=>{var u=l=>{try{o(r.next(l))}catch(d){n(d)}},x=l=>{try{o(r.throw(l))}catch(d){n(d)}},o=l=>l.done?i(l.value):Promise.resolve(l.value).then(u,x);o((r=r.apply(a,t)).next())});import{r as c,j as e,s as z,P as D,k as E,l as A}from"./vendor-DFO5Jmbo.js";import{c as j}from"./api-vXz7ElHN.js";import{M}from"./Modal-D9XuV0-K.js";function P({isOpen:a,onClose:t,onSubmit:r,category:i}){const[n,u]=c.useState({name:(i==null?void 0:i.name)||"",description:(i==null?void 0:i.description)||""}),[x,o]=c.useState(!1),[l,d]=c.useState(""),h=m=>p(this,null,function*(){m.preventDefault(),o(!0),d("");try{const s=f(g({},n),{slug:(i==null?void 0:i.slug)||z(n.name,{lower:!0,strict:!0})});yield r(s),t()}catch(s){d("Bir hata oluştu"),console.error(s)}finally{o(!1)}});return e.jsx(M,{isOpen:a,onClose:t,title:i?"Kategoriyi Düzenle":"Yeni Kategori",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Kategori Adı"}),e.jsx("input",{type:"text",value:n.name,onChange:m=>u(f(g({},n),{name:m.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kategori adı",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Açıklama"}),e.jsx("textarea",{value:n.description,onChange:m=>u(f(g({},n),{description:m.target.value})),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kategori açıklaması",rows:4})]}),l&&e.jsx("div",{className:"text-red-400 bg-red-500/10 p-3 rounded-lg text-sm",children:l}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-400 hover:text-gray-300 transition-colors",disabled:x,children:"İptal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",disabled:x,children:x?"Kaydediliyor...":i?"Güncelle":"Ekle"})]})]})})}function _(){const[a,t]=c.useState([]),[r,i]=c.useState(!0),[n,u]=c.useState(""),[x,o]=c.useState(!1),[l,d]=c.useState(void 0),h=()=>p(this,null,function*(){try{i(!0);const s=yield j.getAll();t(s),u("")}catch(s){u("Kategoriler yüklenirken bir hata oluştu"),console.error(s)}finally{i(!1)}});c.useEffect(()=>{h()},[]);const m=s=>p(this,null,function*(){if(window.confirm("Bu kategoriyi silmek istediğinizden emin misiniz?"))try{yield j.delete(s),yield h()}catch(b){u("Kategori silinirken bir hata oluştu"),console.error(b)}});return r?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Kategoriler"}),e.jsxs("button",{onClick:()=>{d(void 0),o(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(D,{size:20}),"Yeni Kategori"]})]}),n&&e.jsx("div",{className:"bg-red-500/10 text-red-400 p-4 rounded-lg",children:n}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(s=>{var b,v;return e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-lg overflow-hidden hover:border-gray-600/50 transition-colors",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{d(s),o(!0)},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Düzenle",children:e.jsx(E,{size:20})}),e.jsx("button",{onClick:()=>m(s.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Sil",children:e.jsx(A,{size:20})})]})]}),s.description&&e.jsx("p",{className:"text-gray-400",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:[((b=s._count)==null?void 0:b.blogPosts)||0," Blog Yazısı"]}),e.jsxs("span",{children:[((v=s._count)==null?void 0:v.videos)||0," Video"]})]})]})},s.id)})}),e.jsx(P,{isOpen:x,onClose:()=>{o(!1),d(void 0)},onSubmit:s=>p(this,null,function*(){l?yield j.update(l.id,s):yield j.create(s),yield h()}),category:l})]})}export{_ as AdminCategories};
